    * Кэширующий DNS сервер. 
    * Сервер прослушивает 53 порт. При первом запуске кэш пустой. 
    * Сервер получает от клиента рекурсивный запрос и выполняет разрешение запроса. 
    * Получив ответ, сервер разбирает пакет ответа, извлекает из него ВСЮ полезную информацию, т. е. все ресурсные записи, а не только то, 
    о чем спрашивал клиент. Полученная информация сохраняется в кэше сервера. Например, это может быть два хэш-массива.
    * Сервер регулярно просматривает кэш и удаляет просроченные записи (использует поле TTL).
    * Сервер не должен терять работоспособность (уходить в бесконечное ожидание, падать с
    ошибкой и т. д.), если старший сервер почему-то не ответил на запрос. 
    * Во время штатного выключения сервер сериализует данные из кэша, сохраняет их на диск. 
    * При повторных запусках
    сервер считывает данные с диска и удаляет просроченные записи, инициализирует таким образом свой кэш.


# DNS Cache Server - Руководство по запуску

## Предварительные требования
- Python 3.8+


## Установка зависимостей
```bash
pip install -r .\requirements.txt
```

## Запуск сервера и тестов

### 1. Основной сервер (main_dns_server.py)
```bash
python main_dns_server.py
```
**Что делает:**
- Запускает DNS-сервер на порту 53
- Кэширует запросы и сохраняет их в `dns_cache.pkl`
- Логирует операции в `dns_server.log`

### 2. Запуск через nslookup
**В консоли `nslookup`:**
```bash
nslookup
```
```bash
server 127.0.0.1
```
```bash
далее последовательно: e1.ru, mail.ru, dzen.ru
```

### 3. Проверка кэша (check_cache.py)
```bash
python check_cache.py
```

**Что делает:**
- Данные из `dns_cache.pkl` записывает в файл `dns_cache.json`.

**Пример JSON:**
```json
{
  "timestamp": "2025-06-15T14:39:37.030124",
  "cache_source": "dns_cache.pkl",
  "records": [
    {
      "domain": "dzen.ru",
      "type": "A",
      "expires": "2025-06-15T14:41:38.334767",
      "ttl_remaining": 121,
      "records": [
        "185.180.200.2",
        "5.61.23.39"
      ]
    },
    {
      "domain": "e1.ru",
      "type": "A",
      "expires": "2025-06-15T14:36:08.297431",
      "ttl_remaining": 0,
      "records": [
        "195.19.220.24"
      ]
    },
    {
      "domain": "mail.ru",
      "type": "A",
      "expires": "2025-06-15T14:36:33.360544",
      "ttl_remaining": 0,
      "records": [
        "94.100.180.201",
        "94.100.180.200",
        "217.69.139.200",
        "217.69.139.202"
      ]
    },
    {
      "domain": "mail.ru",
      "type": "AAAA",
      "expires": "2025-06-15T14:40:17.476531",
      "ttl_remaining": 40,
      "records": [
        "2a00:1148:1000:101:5:4:0:200"
      ]
    }
  ]
}
```

## Структура файлов
```
.
├── main_dns_server.py    # Основной сервер
├── check_cache.py   # Проверка кэша
├── dns_cache.pkl    # Файл кэша (создаётся автоматически)
├── dns_server.log   # Лог операций
└── dns_cache.json   # Файл кеша (в формате json)
```
## Особенности работы
1. Сервер автоматически создает `dns_cache.pkl` при первом запуске
2. Для первой работы сервера, удалить 3 файла: `dns_server.log`, `dns_cache.pkl`, `dns_cache.json`
3. Кэш обновляется каждые 60 секунд
4. Для корректного завершения нажмите `Ctrl+C`
5. DNS Сервер запущен на 53 порту